---
- hosts: all
  gather_facts: no
  tasks:
    - name: Get disk facts
      win_disk_facts:

    - name: List all disks
      debug:
        msg: 
          - "Disk {{ item.item_number }}:"
          - "  Device ID: {{ item.device_id }}"
          - "  Size: {{ item.size | filesizeformat(true) }}"
          - "  System Disk: {{ 'Yes' if item.system_disk else 'No' }}"
          - "  Model: {{ item.model }}"
          - "  Serial Number: {{ item.serial_number }}"
      loop: "{{ ansible_facts.disks | list }}"
      loop_control:
        index_var: item_number
      when: ansible_facts.disks is defined
